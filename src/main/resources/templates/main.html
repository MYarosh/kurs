
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8"/>
    <title>SPY Objects</title>

    <link rel="stylesheet" href="index.css">
</head>
<body>
<script src="jquery-3.5.1.js"></script>
<span id="head-title">
           Шпионские устройства
        </span>
<img id="imge" src="f_logo.jpg" alt="logo"><br>
<span id="head-author">
            Работу выполнили Сторожева Дарья и Ярошевский Максим
        </span>
<br>


<div class="main">
        <h1>Работа с данными</h1>
        <h1>Какую таблицу выбираем?</h1>
            <input type="radio" name="table" value="People">Люди<br/><br/>
            <input type="radio" name="table" value="ManDo">Человек_Установщик<br/><br/>
            <input type="radio" name="table" value="GadgetsFrom">Устройства_Передатчики<br/><br/>
            <input type="radio" name="table" value="GadgetsTo">Устройства_Приемники<br/><br/>
            <input type="radio" name="table" value="PlaceCom">Место_Расположения<br/><br/>
            <input type="radio" name="table" value="Company">Организация<br/><br/>
            <input type="radio" name="table" value="Country">Страны<br/><br/>
            <input type="radio" name="table" value="ManSee">Наблюдаемый<br/><br/>
            <input type="radio" name="table" value="TypesOfCompanies">Типы_организаций<br/><br/>
            <input type="radio" name="table" value="PlaceDo">Место_установки<br/><br/>
            <input type="radio" name="table" value="TypesOfGadgets">Типы_установленных_устройств<br/><br/>

            <input type="text" id="" placeholder=""><br/><br/>
        <button id="select" class="index_button" onclick="select();">Показать Данные</button>
        <button id="add" class="index_button" onclick="add();">Добавить</button>
        <button id="update" class="index_button" onclick="update();">Редактировать</button>
        <button id="delete" class="index_button" onclick="del();">Удалить</button>

    <button class="index_button"><a class ="link_style" href="/">Назад</a></button>


</div>
<div class="main">

</div>


<script>
    function check(){
        let table;
        let radios = document.getElementsByName("table");
        for (let i=0; i < radios.length; i++){
            if (radios[i].checked){
                table = radios[i].value;
            }
        }
        return table;
    }
    function select() {
        let table = check();
        let url = "/Select/"+table;
        $.ajax({
            url: url,         /* Куда пойдет запрос */
            method: 'post',             /* Метод передачи (post или get) */
            dataType: 'json',          /* Тип данных в ответе (xml, json, script, html). */
            data: {},     /* Параметры передаваемые в запросе. */
            success: function(data){   /* функция которая будет выполнена после успешного запроса.  */
                console.log(data);
                let table = document.createElement("table");
                if (!document.getElementById("result-table")) {
                    table.id = "result-table";
                    let headers = document.createElement("tr");
                    headers.id = "table-headers";
                    let s = "";
                    for (k in data[0]){
                        s = s + "<th>" + k + "</th>";
                    }
                    headers.innerHTML = s;
                    let header = document.createElement("h1");
                    header.innerText = "Вывод данных";
                    document.getElementsByClassName("main")[1].appendChild(header);
                    document.getElementsByClassName("main")[1].appendChild(table);
                    table.appendChild(headers);

                }
                for (let i=0; i<data.length; i++){
                    let s = "";
                    let row = document.createElement("tr");
                    for (k in data[0]){
                        s = s + "<td>" + data[i][k] + "</td>";
                    }
                    row.innerHTML = s;
                    table.appendChild(row);
                    //insertAfter(row,document.getElementById("table-headers"));
                }
            }
        });
    }



</script>





















<!--
<script>
    formUploader.prepareForm(document.getElementById('the_form'));
</script>


<script>
/*    function listner(){
        //TODO: Make buttons not disable
        console.log("Listner works")

    }*/
formUploader = {

    prepareForm: function(form){

        // Каждая значимая кнопка формы при клике должна создать одноименное hidden поле,
        // чтобы на сервер передалась информация о том, какая кнопка была кликнута
        var allFormFields = form.getElementsByTagName('input');
        for (var i=0; i<allFormFields.length; i++){
            if(allFormFields[i].type == 'submit' && allFormFields[i].name){
                allFormFields[i].onclick = function(){
                    formUploader.createHiddenField(this);
                }
            }
        }

        // Визуализируем форму как отправляемую на сервер на событии onsubmit
        // (в т.ч. делаем все кнопки неактивными)
        form.onsubmit = function(){
            formUploader.setFormLoading(form);
        }

        // Очищаем визуализацию формы (в т.ч. делаем все кнопки вновь активными)
        // при уходе со страницы - по глобальному событию onunload
        window.onunload = function(){
            formUploader.clearFormLoading(form)
        }
    },

    setFormLoading: function(form){
        // Создаем визуализацию загрузки формы и делаем все кнопки неактивными
        // disabled=true;
    },

    clearFormLoading: function(form){
        // Очищаем форму от визуализации загрузки и возвращаем кнопки в активное состояние
        // disabled=false;
    },

    createHiddenField: function(button){
        var input = document.createElement('input');
        input.type = 'hidden';
        input.name = button.name;
        input.value = button.value;
        button.parentNode.insertBefore(input, button);
    }
}
</script>


-->
</body>
</html>
